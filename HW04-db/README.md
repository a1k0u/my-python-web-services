## Бизнес сценарий

_Идея_: сервис по доставке готовой еды из ресторанов, 
кафе и т.п. в Европе.

 _Актуальность_: сфера услуг в маленьких Европейских странах
развита очень плохо. Мы предлагаем B2B решение для заведений:
платформа, клиенты, реклама, админ панель, аналитика и 
 система оповещений.

_Реализация_: делаем MVP с некоторыми микросервисами:
главная API, система логирования с будущей реализации аналитики,
система оповещений для бизнеса в популярных мессенджерах. 

_Текущая задача_: рассмотреть БД, которые теоретически хорошо
решают каждую из задач.

## Таблица баз данных

### Сервис 1

Рассмотрим решение главной задачи - **API**. Представим таблицу
с оценками по каждому пункту для каждой из представленных БД. 

| База данных   | Решение задачи | Популярность | Опыт (_личный_) |
|---------------|----------------|--------------|---------------|
| **PostgreSQL** | 9              | 9            | 8             |
| **MongoDB**   | 3              | 9            | 5             |
| **Neo4j**     | 3              | 4            | 0             |
| **Cassandra** | 2              | 4            | 0             |

В нашем сервисе есть несколько сущностей: пользователи 
(`+ бизнес аккаунты`), единицы представленного продукта (`меню`),
заказы. Они между собой несильно связаны:

- Пользователи связаны с заказами.
- Бизнес связан с продуктами.
- У продуктов есть фотографии, какие-то характеристики.
- У заказов есть статус, комментарий, персональные данные пользователя.

Будем использовать **PostgeSQL**, потому что:

- Open source (_бесплатно_, _развивает много сторонних энтузиастов_)
- Расширяемая, транзакции.
- Очень популярна, есть много решенных проблем, доступная информация.
- Реляционная модель, язык запросов SQL.
- Есть интерпрайз версия от PostgreSQL Pro.

Возможные проблемы:

- Не подходит для аналитики.
- Большого количества записей для логов.
(есть ограничения по размеру таблиц в Open Source версии)


**Neo4j** - не подходит для решения первой задачи, так как
у нас немного сущностей, которые связаны между собой. Такую БД
лучше всего использовать в сильно связанных между собой данных.

**Cassandra** - медленное чтение, поэтому для первой задачи не
подходит. С сервера часто приходят `GET` запросы. 

### Сервис 2

Для системы оповещений бизнеса в популярных мессенджерах 
(_Telegram_, _Viber_) лучше использовать **MongoDB**.

- Скорость разработки системы оповещений.
- Нет схем, индексация.
- Понятно как масштабироваться.
- Балансировка нагрузки, легкость развернуться в облаке.

Из минусов можно выделить:

- Не совсем соответствует ACID.
- Сложность с транзакциями.

Но для отправки сообщений ботами в различных социальных сетях отлично подходит.

### Сервис 3

Для аналитики логов (_подходящих для аналитики_) отлично подойдет **Cassandra**.

- Безопасность данных.
- Быстрая запись.
- Аналитика данных.

Из минусов:

- Медленное чтение.
- Большое количество ресурсов.

## Вывод

Для API я бы использовал **PostgreSQL** по причинам, перечисленным ранее.
К тому же у меня есть опыт работы с этой СУБД, что является 
ключевым фактором для работы с главным узлом сервиса.

Для системы оповещений я буду использовать **MongoDB**. 
Для возможной аналитики лучше всего подходит **Cassandra**.

По таблице видно, что с некоторыми СУБД у меня нет опыта. 
Так как я делаю личный проект, то это хороший способ расширить
свой кругозор, изучив новые технологии.